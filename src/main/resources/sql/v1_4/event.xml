<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hongzhi.zswh.app_1_4.dao.EventDao">



    <select id="statusInfo" resultType="map" >
    select
         case when user_id = #{userID}
              then 'true'
              else 'false'
              end as is_registered
        ,count(1) as registered_count
    from event_registration
    where event_id = #{eventID}
    </select>

    <insert id="createEvent"  useGeneratedKeys="true"  keyProperty="event_id" >
    insert into event (
          event_name
         ,club_id
         ,start_time
         ,end_time
         ,register_start_time
         ,register_end_time
         ,organizer_id
         ,event_address
         ,min_people
         ,max_people
         ,fee
         ,image
         ,event_status
         ,view_guests
         ,form_item
    ) values (
          #{event_name}
         ,#{club_id}
         ,#{sql_start_time}
         ,#{sql_end_time}
         ,#{sql_register_start_time}
         ,#{sql_register_end_time}
         ,#{organizer_id}
         ,#{event_address}
         ,#{min_people}
         ,#{max_people}
         ,#{fee}
         ,#{image}
         ,#{event_status}
         ,#{view_guests}
         ,#{form_item}
    )

    </insert>

</mapper>